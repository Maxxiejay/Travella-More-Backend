<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Package Details Form</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">Auth API</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/api">API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/api/auth">Auth</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/package-form">Package Form</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5 mb-5">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <div class="card">
                    <div class="card-header">
                        <h2 class="mb-0">Provide Your Package Details</h2>
                    </div>
                    <div class="card-body">
                        <form id="packageForm">
                            <div class="row">
                                <!-- Pickup Information -->
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">Pickup Information</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="pickupAddress" class="form-label">Pickup Address</label>
                                                <textarea class="form-control" id="pickupAddress" name="pickupAddress" rows="3" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="pickupContactNumber" class="form-label">Contact Number</label>
                                                <input type="text" class="form-control" id="pickupContactNumber" name="pickupContactNumber" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="pickupCountry" class="form-label">Country</label>
                                                <select class="form-select" id="pickupCountry" name="pickupCountry" required>
                                                    <option value="">Select country</option>
                                                    <option value="Nigeria">Nigeria</option>
                                                    <option value="United States">United States</option>
                                                    <option value="United Kingdom">United Kingdom</option>
                                                    <option value="Canada">Canada</option>
                                                    <option value="Australia">Australia</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="pickupState" class="form-label">State</label>
                                                <select class="form-select" id="pickupState" name="pickupState" required>
                                                    <option value="">Select state</option>
                                                    <option value="Lagos">Lagos</option>
                                                    <option value="Abuja">Abuja</option>
                                                    <option value="Rivers">Rivers</option>
                                                    <option value="Kano">Kano</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="pickupCity" class="form-label">City</label>
                                                <input type="text" class="form-control" id="pickupCity" name="pickupCity" required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Delivery Information -->
                                <div class="col-md-6">
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">Delivery Information</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="deliveryAddress" class="form-label">Delivery Address</label>
                                                <textarea class="form-control" id="deliveryAddress" name="deliveryAddress" rows="3" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryContactNumber" class="form-label">Contact Number</label>
                                                <input type="text" class="form-control" id="deliveryContactNumber" name="deliveryContactNumber" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryCountry" class="form-label">Country</label>
                                                <select class="form-select" id="deliveryCountry" name="deliveryCountry" required>
                                                    <option value="">Select country</option>
                                                    <option value="Nigeria">Nigeria</option>
                                                    <option value="United States">United States</option>
                                                    <option value="United Kingdom">United Kingdom</option>
                                                    <option value="Canada">Canada</option>
                                                    <option value="Australia">Australia</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryState" class="form-label">State</label>
                                                <select class="form-select" id="deliveryState" name="deliveryState" required>
                                                    <option value="">Select state</option>
                                                    <option value="Lagos">Lagos</option>
                                                    <option value="Abuja">Abuja</option>
                                                    <option value="Rivers">Rivers</option>
                                                    <option value="Kano">Kano</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="deliveryCity" class="form-label">City</label>
                                                <input type="text" class="form-control" id="deliveryCity" name="deliveryCity" required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Package Details -->
                                <div class="col-md-12">
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">Package Details</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="packageDescription" class="form-label">Package Description</label>
                                                <textarea class="form-control" id="packageDescription" name="packageDescription" rows="3" placeholder="Describe your package (contents, dimensions, special handling instructions, etc.)" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="weightKg" class="form-label">Weight (kg)</label>
                                                <input type="number" step="0.01" min="0.01" class="form-control" id="weightKg" name="weightKg" required>
                                                <small class="text-muted">Enter the approximate weight in kilograms</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Pricing Information -->
                                <div class="col-md-12">
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0">Pricing Information</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="hasPackageDiscount" name="hasPackageDiscount">
                                                <label class="form-check-label" for="hasPackageDiscount">
                                                    First Package Discount
                                                </label>
                                                <div class="text-muted">
                                                    <small>Use this discount code for your first shipment (max of N5,000)</small>
                                                </div>
                                            </div>
                                            <button type="submit" class="btn btn-primary w-100">Schedule Pickup</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Response Display -->
                <div class="card mt-4" id="responseCard" style="display: none;">
                    <div class="card-header">
                        <h3 class="mb-0">API Response</h3>
                    </div>
                    <div class="card-body">
                        <pre id="responseData" class="bg-dark text-light p-3 rounded"></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-3 bg-dark text-center text-white">
        <div class="container">
            <p class="mb-0">Authentication API &copy; 2023</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('packageForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const jsonData = {};
            
            // Convert FormData to JSON
            formData.forEach((value, key) => {
                if (key === 'hasPackageDiscount') {
                    jsonData[key] = true; // Checkbox is only included if checked
                } else if (key === 'weightKg') {
                    jsonData[key] = parseFloat(value); // Convert to number
                } else {
                    jsonData[key] = value;
                }
            });
            
            // If hasPackageDiscount checkbox was not checked, set it to false
            if (!jsonData.hasPackageDiscount) {
                jsonData.hasPackageDiscount = false;
            }
            
            // Send data to the API
            fetch('http://localhost:8000/api/packages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => response.json())
            .then(data => {
                // Show response
                document.getElementById('responseCard').style.display = 'block';
                document.getElementById('responseData').textContent = JSON.stringify(data, null, 2);
                
                // If successful, reset form
                if (data.success) {
                    document.getElementById('packageForm').reset();
                    alert('Package created successfully!');
                }
            })
            .catch(error => {
                // Show error
                document.getElementById('responseCard').style.display = 'block';
                document.getElementById('responseData').textContent = 'Error: ' + error.message;
            });
        });
    </script>
</body>
</html>